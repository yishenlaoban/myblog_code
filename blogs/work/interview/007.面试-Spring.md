---
title: 面试-Spring
date: 2022-03-08
categories:
 - 面试
tags:
 - Spring
sidebar: 'auto'
---



### 如何实现一个IOC容器

1、配置文件的包扫描路径

2、递归包扫描获取.class文件

3、通过反射确定交给IOC管理的类

4、对需要注入的类进行依赖注入



* 配置文件指定需要扫描的包路径；
* 定义一些注解，分别表示访问控制层，业务服务层，数据持久层，依赖注入注解，获取配置文件注解；
* 从配置文件中获取需要扫描的包路径，获取到当前路径下文件夹信息，我们将当前路径下所有以.class结尾的文件添加到一个Set集合中进行存储；
* 遍历这个set集合，获取在类上有指定注解的类，并将其交给IOC容器，定义一个安全的Map用来存储这些对象；
* 遍历IOC容器，获取到每一个类的实例，判断里面是有依赖其他的类的实例，然后进行递归注入。
